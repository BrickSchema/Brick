@prefix brick: <https://brickschema.org/schema/1.1/Brick#> .
@prefix prop: <https://brickschema.org/schema/1.1/BrickEntityProperties#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix qudt: <http://qudt.org/schema/qudt/> .
@prefix qudtqk: <http://qudt.org/vocab/quantitykind/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix sosa: <http://www.w3.org/ns/sosa#> .
@prefix tag: <https://brickschema.org/schema/1.1/BrickTag#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix unit: <http://qudt.org/vocab/unit/> .

prop:value  rdfs:subPropertyOf  qudt:value .
prop:EntityProperty  rdfs:subClassOf owl:ObjectProperty .

prop:InherentProperty  a   owl:ObjectProperty ;
    skos:definition "A permanent, characteristic property of the entity" ;
    rdfs:subClassOf prop:EntityProperty .

prop:ConfigurableProperty  a   owl:ObjectProperty ;
    skos:definition "A temporary, changeable property of the entity" ;
    rdfs:subClassOf prop:EntityProperty .

prop:PhysicalProperty a   owl:ObjectProperty ;
    skos:definition "A property of the entity's physical existence" ;
    rdfs:subClassOf prop:EntityProperty .

prop:RatedPhysicalProperty a owl:ObjectProperty ;
    skos:definition "A property that is 'rated' --- provided as part of the specification" ;
    rdfs:subClassOf prop:PhysicalProperty ;
.

prop:VirtualProperty a   owl:ObjectProperty ;
    skos:definition "A property of the entity's virtual (networked, computed) existence" ;
    rdfs:subClassOf prop:EntityProperty .

prop:IdentityProperty a   owl:ObjectProperty ;
    skos:definition "A property that identifies the entity in some way" ;
    rdfs:subClassOf prop:EntityProperty .

prop:InherentPhysicalProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:PhysicalProperty, prop:InherentProperty .
prop:ConfigurablePhysicalProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:PhysicalProperty, prop:ConfigurableProperty .

prop:InherentVirtualProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:VirtualProperty, prop:InherentProperty .
prop:ConfigurableVirtualProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:VirtualProperty, prop:ConfigurableProperty .

prop:InherentIdentityProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:IdentityProperty, prop:InherentProperty .
prop:ConfigurableIdentityProperty  a   owl:ObjectProperty ;
    rdfs:subClassOf prop:IdentityProperty, prop:ConfigurableProperty .

################################
### Identifiers
################################

prop:hasUBID a prop:IdentityProperty ;
    skos:definition "A Unique Building Identifier for the building, following the PNNL-developed standard" ;
    rdfs:seeAlso <https://buildingid.pnnl.gov/> ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;
.

# TODO: finish this definition up
prop:hasBuildingSyncPremisesIdentifier a prop:IdentityProperty ;
    skos:definition "The PremisesIdentifier for this building as it appears in a BuildingSync model" ;
    rdfs:seeAlso <https://buildingsync.net/schema/v2.1.0/documentation/#Link83> ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
    ] ;
.


################################
### Physical Properties
################################

prop:hasArea    a  prop:PhysicalProperty ;
    skos:definition "Entity has 2-dimensional area" ;
    rdfs:range  prop:AreaShape ;
.

# https://bedes.lbl.gov/bedes-online/gross
prop:hasGrossArea    rdfs:subPropertyOf  prop:hasArea ;
    skos:definition "Entity has gross 2-dimensional area" ;
    rdfs:range  prop:AreaShape ;
.

# https://bedes.lbl.gov/bedes-online/net
prop:hasNetArea    rdfs:subPropertyOf  prop:hasArea ;
    skos:definition "Entity has gross 2-dimensional area" ;
    rdfs:range  prop:AreaShape ;
.

prop:AreaShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:FT2 unit:M2) ;
        sh:minCount 1 ;
    ] .

prop:hasVolume  a  prop:PhysicalProperty ;
    skos:definition "Entity has 3-dimensional volume" ;
    rdfs:range  prop:VolumeShape .

prop:VolumeShape    a   sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:FT3 unit:M3) ;
        sh:minCount 1 ;
    ] .

prop:hasThermalResistance a prop:PhysicalProperty, prop:InherentProperty ;
    skos:definition "Entity has given thermal resistance (R-value)" ;
    rdfs:range prop:RValueShape ;
.

prop:RValueShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1 ;
    ] ;
.

prop:hasRatedCADR a prop:RatedPhysicalProperty ;
    skos:definition  "The rated Clean Air Delivery Rate (CADR) for an equipment" ;
    rdfs:range prop:RatedCADRShape ;
.

prop:RatedCADRShape a sh:NodeShape ;
    rdfs:range  qudt:Quantity ;
    qudt:hasQuantityKind qudtqk:VolumeFlowRate ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:FT3-PER-MIN unit:FT3-PER-HR unit:M3-PER-MIN) ;
        sh:minCount 1 ;
    ] ;
.

prop:hasMaximumRatedFrequency a prop:RatedPhysicalProperty ;
    skos:definition "The maximum operating frequency for a piece of equipment" ;
    rdfs:range prop:FrequencyShape ;
.

prop:FrequencyShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:HZ unit:MegaHZ unit:REV-PER-MIN) ;
        sh:minCount 1 ;
    ] ;
.

prop:hasMaximumRatedCFM a prop:RatedPhysicalProperty ;
    skos:definition "The maximum volume of air per minute that can be moved by this equipment" ;
    rdfs:range prop:CFMShape ;
.

prop:CFMShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:hasValue unit:CFM ;
        sh:minCount 1 ;
    ] ;
.

prop:hasHXInterfaceType a prop:InherentPhysicalProperty ;
    skos:definition "The type of the interface utilized by a heat exchanger" ;
    rdfs:range prop:HXInterfaceShape ;
.

prop:HXInterfaceShape a sh:NodeShape ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        # from Si-WG Crowdsourcing Document
        sh:in ("plate" "plate-fin" "double-pipe" "double-wall" "multichannel" "scraped" "shell-and-tube" "runaround") ;
        sh:minCount 1 ;
    ] ;
.

# from SI-WG crowdsourcing document
prop:hasCoilDepth a prop:InherentPhysicalProperty ;
    rdfs:range prop:OneDimensionalCoilShape ;
.
prop:hasCoilFaceArea a prop:InherentPhysicalProperty ;
    rdfs:range prop:TwoDimensionalCoilShape ;
.
prop:hasCoilHeight a prop:InherentPhysicalProperty ;
    rdfs:range prop:OneDimensionalCoilShape ;
.
prop:hasCoilLength a prop:InherentPhysicalProperty ;
    rdfs:range prop:OneDimensionalCoilShape ;
.
prop:hasCoilWidth a prop:InherentPhysicalProperty ;
    rdfs:range prop:OneDimensionalCoilShape ;
.

prop:OneDimensionalCoilShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in (unit:IN unit:CentiM) ;
        sh:minCount 1 ;
    ] ;
.

prop:TwoDimensionalCoilShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in (unit:IN2 unit:CentiM2) ;
        sh:minCount 1 ;
    ] ;
.

################################
### Electrical Properties
################################
prop:ElectricalProperty rdfs:subClassOf prop:PhysicalProperty ;
    skos:definition "Physical properties relating to electrical characteristics" .

prop:hasComplexity a  prop:ElectricalProperty ;
    skos:definition "Entity has given power complexity" ;
    rdfs:range prop:PowerComplexityShape .

prop:hasPowerFlow a  prop:ElectricalProperty ;
    skos:definition "Entity has given power flow" ;
    rdfs:range prop:PowerFlowShape .

prop:hasPhases a  prop:ElectricalProperty ;
    skos:definition "Entity has given phases" ;
    rdfs:range prop:PhasesShape .

prop:hasPhaseCount a  prop:ElectricalProperty ;
    skos:definition "Entity has given phase count" ;
    rdfs:range prop:PhaseCountShape .

prop:PowerComplexityShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        sh:path prop:value ;
        sh:in   ("real" "reactive" "apparent") ;
        sh:minCount 1 ;
    ] .
prop:PowerFlowShape  a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        sh:path brick:value ;
        sh:in   ("import" "export" "net" "absolute") ;
        sh:minCount 1 ;
    ] .
prop:PhasesShape  a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        sh:path brick:value ;
        sh:in   ("A" "B" "C" "AB" "BC" "AC" "ABC") ;
        sh:minCount 1 ;
    ] .

prop:PhaseCountShape    a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:nonNegativeInteger ;
        sh:minCount 1 ;
    ] .


prop:hasSerialNumber    a   prop:InherentProperty, prop:IdentityProperty ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:minCount 1 ;
    ] .


prop:hasMaximumRatedPower a prop:RatedPhysicalProperty, prop:ElectricalProperty ;
    skos:definition "The maximum power input allowed to flow through a particular equipment" ;
    rdfs:range prop:WattageShape ;
.

prop:hasRatedPower a prop:RatedPhysicalProperty, prop:ElectricalProperty ;
    skos:definition "The nominal power draw of a particular equipment" ;
    rdfs:range prop:WattageShape ;
.

prop:hasRatedVoltage a prop:RatedPhysicalProperty, prop:ElectricalProperty ;
    skos:definition "The nominal voltage allowed to be supplied to this equipment" ;
    rdfs:range prop:VoltageShape ;
.

prop:hasRatedElectricalFrequency a prop:RatedPhysicalProperty, prop:ElectricalProperty ;
    skos:definition "The nominal electrical frequency allowed to be supplied to this equipment" ;
    rdfs:range prop:ElectricalFrequencyShape ;
.

prop:WattageShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:W unit:KiloW) ;
        sh:minCount 1 ;
    ] ;
.

prop:VoltageShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:V unit:KiloV) ;
        sh:minCount 1 ;
    ] ;
.

prop:ElectricalFrequencyShape a sh:NodeShape ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a sh:PropertyShape ;
        sh:path brick:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1;
    ] ;
    sh:property [
        sh:path brick:hasUnit ;
        sh:in   (unit:HZ unit:MegaHZ) ;
        sh:minCount 1 ;
    ] ;
.

################################
### Networking Properties
################################

prop:NetworkProperty    rdfs:subClassOf prop:VirtualProperty ;
    skos:definition "Properties related to the networked aspects of an entity" .

prop:hasNetworkAddress  a   prop:NetworkProperty ;
    skos:definition "Entity has the given network address" .

prop:hasMACAddress  rdfs:subPropertyOf  prop:hasNetworkAddress ;
    a   prop:InherentProperty ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:minCount 1 ;
    ] .

prop:hasNMI  rdfs:subPropertyOf  prop:hasNetworkAddress ;
    a   prop:InherentProperty ;
    rdfs:range qudt:Quantity ;
    sh:property [
        a   sh:PropertyShape ;
        sh:path brick:value ;
        sh:minCount 1 ;
    ] .

prop:hasIPAddress   rdfs:subPropertyOf  prop:hasNetworkAddress ;
    a   prop:ConfigurableProperty .
prop:hasIP4Address  rdfs:subPropertyOf  prop:hasIP4Address .
prop:hasIP6Address  rdfs:subPropertyOf  prop:hasIP4Address .


################################
### Aggregation Properties
################################

prop:aggregate  a prop:VirtualProperty ;
    rdfs:range  prop:AggregationShape .

prop:AggregationShape   a   sh:NodeShape ;
    sh:property [
        sh:path prop:aggregationFunction ;
        sh:in   ("max" "min" "mean" "mode" "median" "count" "sum") ;
        sh:minCount 1 ;
    ] ;
    sh:property [
        # TODO: how to represent durations?
        # https://en.wikipedia.org/wiki/ISO_8601#Durations
        sh:path prop:aggregationInterval ;
        sh:datatype xsd:string ; # e.g. "15m" ?
        sh:minCount 1 ;
    ] .


# identity properties:
# - BSync Premises Identifier https://github.com/BuildingSync/schema/blob/4db7102a6c627bade6e5dbb1861ac96633adfb9b/BuildingSync.xsd#L15215
# - UBID: https://ubid.pnnl.gov/
